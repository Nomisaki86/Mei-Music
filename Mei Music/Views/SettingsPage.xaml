<UserControl x:Class="Mei_Music.SettingsPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="800">
    <Grid x:Name="SettingsScrollScope" Background="#FFE9ECF1">
        <ScrollViewer x:Name="SettingsScrollViewer"
                      VerticalScrollBarVisibility="Hidden"
                      HorizontalScrollBarVisibility="Disabled"
                      ScrollChanged="SettingsScrollViewer_ScrollChanged">

            <StackPanel Margin="30,20,30,40" MaxWidth="1000" HorizontalAlignment="Left">
                
                <!-- Settings Header Row -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,24">
                    <Button x:Name="BackButton"
                            Command="{Binding DataContext.CloseSettingsCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                            Width="32" Height="32"
                            Margin="0,0,16,0"
                            Background="Transparent"
                            BorderThickness="0"
                            Cursor="Hand">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" CornerRadius="16">
                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                        <Image Source="/Resources/Images/back.png" Width="20" Height="20" RenderOptions.BitmapScalingMode="HighQuality"/>
                    </Button>
                    <TextBlock Text="Settings"
                               FontSize="28"
                               FontWeight="Bold"
                               Foreground="#21262d"
                               VerticalAlignment="Center"
                               Margin="0,0,0,2"/>
                </StackPanel>
                
                <!-- Appearance Section -->
                <TextBlock Text="Appearance"
                           FontSize="20"
                           FontWeight="Bold"
                           Foreground="#21262d"
                           Margin="0,0,0,16"/>
                
                <Border Background="#FFFFFF"
                        CornerRadius="12"
                        Padding="20"
                        BorderBrush="#e1e4e8"
                        BorderThickness="1">
                    <StackPanel>
                        
                        <TextBlock Text="Current Theme"
                                   FontSize="16"
                                   FontWeight="SemiBold"
                                   Foreground="#24292e"
                                   Margin="0,0,0,6"/>
                        <TextBlock Text="Customize the color of the playback controls and highlights."
                                   Foreground="#586069"
                                   FontSize="14"
                                   Margin="0,0,0,16"
                                   TextWrapping="Wrap"/>
                        
                        <xctk:ColorCanvas x:Name="AccentColorCanvas"
                                          SelectedColorChanged="AccentColorCanvas_SelectedColorChanged"
                                          HorizontalAlignment="Left"
                                          Background="White"
                                          Width="280" />
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <ScrollBar x:Name="SettingsOverlayScrollBar"
                   Width="10"
                   Margin="0,0,2,0"
                   HorizontalAlignment="Right"
                   VerticalAlignment="Stretch"
                   Orientation="Vertical"
                   Tag="{Binding IsMouseOver, ElementName=SettingsScrollScope}"
                   Opacity="0"
                   Minimum="0"
                   Maximum="0"
                   SmallChange="16"
                   LargeChange="32"
                   Panel.ZIndex="8"
                   ValueChanged="SettingsOverlayScrollBar_ValueChanged"
                   Style="{StaticResource AutoHideHostBoundScrollBar}"/>
    </Grid>
</UserControl>
